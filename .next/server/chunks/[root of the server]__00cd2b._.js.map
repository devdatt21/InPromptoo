{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file://D%3A/experiments/next/prompt_discovery/utils/database.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nlet isConnected = false;\r\n\r\nexport const connectToDB = async () => {\r\n    mongoose.set('strictQuery', true);\r\n\r\n    if(isConnected) {\r\n        console.log(\"MongoDB is already connected\");\r\n        return;\r\n    }   \r\n\r\n    try {\r\n        await mongoose.connect(process.env.MONGODB_URI, {\r\n            dbName: \"InPromptoo\",\r\n            useNewUrlParser: true,\r\n            useUnifiedTopology: true,\r\n        })\r\n\r\n        isConnected = true;\r\n\r\n        console.log(\"MongoDB connected\");\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,IAAI,cAAc;AAEX,MAAM,cAAc;IACvB,yGAAA,CAAA,UAAQ,CAAC,GAAG,CAAC,eAAe;IAE5B,IAAG,aAAa;QACZ,QAAQ,GAAG,CAAC;QACZ;IACJ;IAEA,IAAI;QACA,MAAM,yGAAA,CAAA,UAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAE;YAC5C,QAAQ;YACR,iBAAiB;YACjB,oBAAoB;QACxB;QAEA,cAAc;QAEd,QAAQ,GAAG,CAAC;IAChB,EAAE,OAAO,OAAO;QACZ,QAAQ,GAAG,CAAC;IAChB;AACJ"}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file://D%3A/experiments/next/prompt_discovery/models/user.js"],"sourcesContent":["import {Schema, model, models} from \"mongoose\";\r\n\r\nconst UserSchema = new Schema({\r\n    email: {type: String, unique: [true, \"Email already exists\"], required: [true, \"Email is required\"]},\r\n    username: {type: String, required: [true, \"Username is required\"]},\r\n    image: {type: String},\r\n});\r\n\r\nconst User = models.User || model(\"User\", UserSchema);\r\n\r\nexport default User;\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,aAAa,IAAI,yGAAA,CAAA,SAAM,CAAC;IAC1B,OAAO;QAAC,MAAM;QAAQ,QAAQ;YAAC;YAAM;SAAuB;QAAE,UAAU;YAAC;YAAM;SAAoB;IAAA;IACnG,UAAU;QAAC,MAAM;QAAQ,UAAU;YAAC;YAAM;SAAuB;IAAA;IACjE,OAAO;QAAC,MAAM;IAAM;AACxB;AAEA,MAAM,OAAO,yGAAA,CAAA,SAAM,CAAC,IAAI,IAAI,CAAA,GAAA,yGAAA,CAAA,QAAK,AAAD,EAAE,QAAQ;uCAE3B"}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file://D%3A/experiments/next/prompt_discovery/app/api/auth/%5B...nextauth%5D/route.js"],"sourcesContent":["import NextAuth from \"next-auth\";\r\nimport GoogleProvider from \"next-auth/providers/google\";\r\nimport { connectToDB } from \"@utils/database\";\r\nimport User from \"@models/user\";\r\n\r\n\r\nexport const authOptions = {        \r\n    providers: [GoogleProvider({\r\n        clientId: process.env.GOOGLE_ID,\r\n        clientSecret: process.env.GOOGLE_CLIENT_SECRET,\r\n    })],\r\n    callbacks: {\r\n        async session({session}) {\r\n            const sessionUser = await User.findOne({email: session.user.email});\r\n            session.user.id = sessionUser._id.toString();\r\n            return session;\r\n        },  \r\n        async signIn({profile}) {\r\n            try {\r\n                await connectToDB();\r\n    \r\n                //check if user already exists\r\n                const userExists = await User.findOne({email: profile.email});\r\n                \r\n                //if not, create a new user\r\n\r\n                if(!userExists) {\r\n                    await User.create({\r\n                        email: profile.email,\r\n                        username: profile.name.replace(\" \", \"\").toLowerCase(),\r\n                        image: profile.picture,\r\n                    });\r\n                }\r\n    \r\n                return true;\r\n            } catch (error) {\r\n                console.log(error);\r\n                return false;\r\n            }\r\n        }\r\n    },\r\n}\r\n\r\nconst handler = NextAuth(authOptions);\r\n\r\nexport {handler as GET, handler as POST};"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;AAGO,MAAM,cAAc;IACvB,WAAW;QAAC,CAAA,GAAA,qJAAA,CAAA,UAAc,AAAD,EAAE;YACvB,UAAU,QAAQ,GAAG,CAAC,SAAS;YAC/B,cAAc,QAAQ,GAAG,CAAC,oBAAoB;QAClD;KAAG;IACH,WAAW;QACP,MAAM,SAAQ,EAAC,OAAO,EAAC;YACnB,MAAM,cAAc,MAAM,gHAAA,CAAA,UAAI,CAAC,OAAO,CAAC;gBAAC,OAAO,QAAQ,IAAI,CAAC,KAAK;YAAA;YACjE,QAAQ,IAAI,CAAC,EAAE,GAAG,YAAY,GAAG,CAAC,QAAQ;YAC1C,OAAO;QACX;QACA,MAAM,QAAO,EAAC,OAAO,EAAC;YAClB,IAAI;gBACA,MAAM,CAAA,GAAA,mHAAA,CAAA,cAAW,AAAD;gBAEhB,8BAA8B;gBAC9B,MAAM,aAAa,MAAM,gHAAA,CAAA,UAAI,CAAC,OAAO,CAAC;oBAAC,OAAO,QAAQ,KAAK;gBAAA;gBAE3D,2BAA2B;gBAE3B,IAAG,CAAC,YAAY;oBACZ,MAAM,gHAAA,CAAA,UAAI,CAAC,MAAM,CAAC;wBACd,OAAO,QAAQ,KAAK;wBACpB,UAAU,QAAQ,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,WAAW;wBACnD,OAAO,QAAQ,OAAO;oBAC1B;gBACJ;gBAEA,OAAO;YACX,EAAE,OAAO,OAAO;gBACZ,QAAQ,GAAG,CAAC;gBACZ,OAAO;YACX;QACJ;IACJ;AACJ;AAEA,MAAM,UAAU,CAAA,GAAA,uIAAA,CAAA,UAAQ,AAAD,EAAE"}},
    {"offset": {"line": 262, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}